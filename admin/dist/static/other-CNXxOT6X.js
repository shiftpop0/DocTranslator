import{a as V,b as x}from"./index-f490yoIt.js";import{E as m}from"./element-BadtrIEY.js";import{f as y,r as d,c as k,i as w,H as E,E as q,G as o,a8 as i,ae as C,h as c,M as a,K as D}from"./vue-CUr9ttjf.js";import{_ as B}from"./index-m2bO0gKZ.js";import"./vxe-Ca06C60r.js";const M={class:"app-container"},S=y({name:"接口配置",__name:"other",setup(U){const u=d(!1),e=d({prompt:"",threads:"",email_limit:""}),_=d(null),f={prompt:[{required:!0,message:"请填写默认提示语",trigger:"blur"}],threads:[{required:!0,message:"请填写默认线程数",trigger:"blur"}]};k(async()=>{u.value=!0,await V().then(r=>{e.value=r.data}),u.value=!1});function v(r){e.value,e.value.prompt,e.value.threads,e.value.email_limit,r==null||r.validate((l,s)=>{if(e.value,l)x({prompt:e.value.prompt,threads:e.value.threads,email_limit:e.value.email_limit}).then(t=>{t.code==200?m.success("保存成功"):m.error(t.message)}).catch(t=>{m.error(t)});else for(const t in s){s[t].forEach(p=>{m({message:p.message,type:"error"})});break}})}return(r,l)=>{const s=i("el-input"),t=i("el-form-item"),p=i("el-button"),g=i("el-form"),h=i("el-card"),b=C("loading");return c(),w("div",M,[E((c(),q(h,{shadow:"never","element-loading-text":"加载中..."},{default:o(()=>[a(g,{class:"settingForm",ref_key:"settingForm",ref:_,model:e.value,"label-position":"top",rules:f},{default:o(()=>[a(t,{label:"默认提示语",required:"",prop:"prompt"},{default:o(()=>[a(s,{type:"textarea",resize:"none",rows:5,modelValue:e.value.prompt,"onUpdate:modelValue":l[0]||(l[0]=n=>e.value.prompt=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"默认线程数",required:"",prop:"threads"},{default:o(()=>[a(s,{modelValue:e.value.threads,"onUpdate:modelValue":l[1]||(l[1]=n=>e.value.threads=n)},null,8,["modelValue"])]),_:1}),a(t,{label:"限定注册邮箱后缀",prop:"email_limit"},{default:o(()=>[a(s,{modelValue:e.value.email_limit,"onUpdate:modelValue":l[2]||(l[2]=n=>e.value.email_limit=n),placeholder:"多个用逗号隔开,完全匹配域名"},null,8,["modelValue"])]),_:1}),a(t,{class:"setting-btns"},{default:o(()=>[a(p,{style:{width:"88px"},type:"primary",onClick:l[3]||(l[3]=n=>v(_.value))},{default:o(()=>[D("保存")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["element-loading-text"])),[[b,u.value]])])}}}),I=B(S,[["__scopeId","data-v-2ab1c7e7"]]);export{I as default};
