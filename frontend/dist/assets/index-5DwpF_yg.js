import{_ as K,u as O,M as z,r as i,o as A,c as M,a as l,b as T,h as s,w as a,t as D,B as u,p as g,ad as q,i as k,ae as j,$ as P,af as $,ag as C,U as b,E as d}from"./index-Dylns0N4.js";import{l as G,r as H}from"./auth-DwWc9sqN.js";const J={class:"auth-page"},Q={class:"auth-box"},W={class:"auth-sidebar"},X={class:"sidebar-top"},Y={class:"feature-list"},Z={class:"feature-item"},ee={class:"feature-item"},se={class:"feature-item"},le={class:"auth-form-container"},ae={class:"form-wrapper"},oe={class:"auth-header"},te={class:"auth-title"},re={class:"auth-subtitle"},ie={class:"form-actions"},de={class:"form-footer"},ne={class:"footer-text"},ue={__name:"index",setup(me){const B=O(),x=z(),c=g("login"),v=g(null),_=g(null),w=g(!1),y=g(!1),n=b({email:"",password:""}),E=b({email:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:2,message:"密码长度不能少于2位",trigger:"blur"}]}),o=b({email:"",code:"",password:"",password2:"",name:""}),N=b({email:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请设置密码",trigger:"blur"},{min:2,message:"密码长度不能少于2位",trigger:"blur"}],password2:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(f,e,t)=>{e!==o.password?t(new Error("两次密码输入不一致")):t()},trigger:"blur"}]}),h=()=>{v.value&&v.value.validate(async f=>{if(f){w.value=!0;try{const e={...n};e.email.indexOf("@local.com")!==-1||e.email.includes("@")||(e.email=e.email+"@local.com");const t=await G(e);t.code===200?(B.updateToken(t.data.token),d.success("登录成功"),x.push({name:"home"})):d.error(t.message||"登录失败")}catch(e){d.error(e.response.data.message||"登录失败，请稍后重试")}finally{w.value=!1}}else d.error("请正确填写表单")})},U=()=>{_.value&&_.value.validate(async f=>{if(f){y.value=!0;try{const e={...o};e.email.indexOf("@local.com")!==-1||e.email.includes("@")||(e.email=e.email+"@local.com"),e.code="123456";const t=await H(e);t.code===200?(d.success("注册成功，请登录"),c.value="login",n.email=o.email,Object.assign(o,{email:"",name:"",code:"",password:"",password2:""})):d.error(t.message||"注册失败")}catch(e){d.error(e.message||"注册失败，请稍后重试")}finally{y.value=!1}}else d.error("请正确填写表单")})},S=()=>{x.push({name:"password"})};return(f,e)=>{const t=i("el-icon"),m=i("el-input"),p=i("el-form-item"),V=i("el-link"),L=i("el-button"),R=i("el-form"),F=i("el-tab-pane"),I=i("el-tabs");return A(),M("div",J,[e[20]||(e[20]=l("div",{class:"bg-shape shape-1"},null,-1)),e[21]||(e[21]=l("div",{class:"bg-shape shape-2"},null,-1)),l("div",Q,[l("div",W,[l("div",X,[e[10]||(e[10]=T('<div class="brand-header" data-v-be6d26cb><img src="'+q+'" alt="Logo" class="brand-logo" data-v-be6d26cb><span class="brand-name" data-v-be6d26cb>DocTranslator</span></div><div class="brand-slogan" data-v-be6d26cb><p class="main-slogan" data-v-be6d26cb>开源的AI文档智能翻译平台</p><p class="sub-slogan" data-v-be6d26cb>一站式文档翻译平台</p></div>',2)),l("div",Y,[l("div",Z,[s(t,null,{default:a(()=>[s(k(j))]),_:1}),e[7]||(e[7]=l("span",null,"开源项目，社区支持",-1))]),l("div",ee,[s(t,null,{default:a(()=>[s(k(P))]),_:1}),e[8]||(e[8]=l("span",null,"支持本地/云端部署",-1))]),l("div",se,[s(t,null,{default:a(()=>[s(k($))]),_:1}),e[9]||(e[9]=l("span",null,"支持定制化功能开发",-1))])])]),e[11]||(e[11]=l("div",{class:"sidebar-footer"},[l("div",{class:"copyright-info"},[l("a",{href:"https://www.doctranslator.cn",target:"_blank",class:"github-link"},[l("p",{class:"copyright"},"© 2025 DocTranslator 1.5.0 保留所有权利")])])],-1))]),l("div",le,[e[19]||(e[19]=T('<div class="mobile-header" data-v-be6d26cb><div class="mobile-brand" data-v-be6d26cb><img src="'+q+'" alt="Logo" class="mobile-logo" data-v-be6d26cb><div class="mobile-text" data-v-be6d26cb><h1 class="mobile-title" data-v-be6d26cb>DocTranslator Pro</h1><p class="mobile-subtitle" data-v-be6d26cb>AI文档智能翻译平台</p></div></div></div>',1)),l("div",ae,[l("div",oe,[l("h2",te,D(c.value==="login"?"欢迎回来":"创建账号"),1),l("p",re,D(c.value==="login"?"登录您的账户":"注册新账户开始使用"),1)]),s(I,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=r=>c.value=r),stretch:"",class:"custom-tabs"},{default:a(()=>[s(F,{label:"登录",name:"login"},{default:a(()=>[s(R,{ref_key:"loginFormRef",ref:v,model:n,rules:E,size:"large",class:"auth-form",onKeyup:C(h,["enter"])},{default:a(()=>[s(p,null,{default:a(()=>[s(m,{modelValue:n.email,"onUpdate:modelValue":e[0]||(e[0]=r=>n.email=r),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(p,null,{default:a(()=>[s(m,{modelValue:n.password,"onUpdate:modelValue":e[1]||(e[1]=r=>n.password=r),type:"password","show-password":"",placeholder:"请输入密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),l("div",ie,[s(V,{underline:!1,class:"forget-link",onClick:S},{default:a(()=>[...e[12]||(e[12]=[u("忘记密码?",-1)])]),_:1})]),s(L,{type:"primary",class:"submit-btn",loading:w.value,onClick:h},{default:a(()=>[...e[13]||(e[13]=[u("登录",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1}),s(F,{label:"注册",name:"register"},{default:a(()=>[s(R,{ref_key:"registerFormRef",ref:_,model:o,rules:N,size:"large",class:"auth-form",onKeyup:C(U,["enter"])},{default:a(()=>[s(p,{prop:"name"},{default:a(()=>[s(m,{modelValue:o.name,"onUpdate:modelValue":e[2]||(e[2]=r=>o.name=r),placeholder:"请输入昵称","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(p,{prop:"email"},{default:a(()=>[s(m,{modelValue:o.email,"onUpdate:modelValue":e[3]||(e[3]=r=>o.email=r),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(p,{prop:"password"},{default:a(()=>[s(m,{modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=r=>o.password=r),type:"password","show-password":"",placeholder:"请设置密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),s(p,{prop:"password2"},{default:a(()=>[s(m,{modelValue:o.password2,"onUpdate:modelValue":e[5]||(e[5]=r=>o.password2=r),type:"password","show-password":"",placeholder:"请确认密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),s(L,{type:"primary",class:"submit-btn",loading:y.value,onClick:U},{default:a(()=>[...e[14]||(e[14]=[u(" 注册 ",-1)])]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),l("div",de,[l("p",ne,[e[17]||(e[17]=u(" 继续使用即表示同意 ",-1)),s(V,{type:"primary",class:"footer-link"},{default:a(()=>[...e[15]||(e[15]=[u("服务条款",-1)])]),_:1}),e[18]||(e[18]=u(" 和 ",-1)),s(V,{type:"primary",class:"footer-link"},{default:a(()=>[...e[16]||(e[16]=[u("隐私政策",-1)])]),_:1})])])])])])])}}},fe=K(ue,[["__scopeId","data-v-be6d26cb"]]);export{fe as default};
