import{_ as A,u as j,r as i,T as w,c as O,a as s,b as D,h as a,w as l,t as L,B as d,L as P,z as u,o as G,ad as E,i as T,ae as H,$ as J,af as Q,ag as I,E as n}from"./index-Z-crM38B.js";import{r as W,l as X,a as Y}from"./auth-CkFQFBOo.js";const Z={class:"auth-page"},ee={class:"auth-box"},ae={class:"auth-sidebar"},se={class:"sidebar-top"},le={class:"feature-list"},oe={class:"feature-item"},te={class:"feature-item"},re={class:"feature-item"},ne={class:"auth-form-container"},ie={class:"form-wrapper"},de={class:"auth-header"},ue={class:"auth-title"},me={class:"auth-subtitle"},pe={class:"form-actions"},ge={class:"form-footer"},fe={class:"footer-text"},ce={__name:"index",setup(ve){const B=j(),R=P(),c=i("login"),y=i(null),V=i(null),k=i(!1),x=i(!1),v=i(!1),m=w({email:"",password:""}),K=w({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]}),o=w({email:"",code:"",password:"",password2:"",name:""}),N=w({email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请设置密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}],password2:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(r,e,f)=>{e!==o.password?f(new Error("两次密码输入不一致")):f()},trigger:"blur"}]}),_=i("获取验证码"),b=i(!1),z=async()=>{if(!(b.value||v.value)){if(!o.email){n.warning("请先输入邮箱地址");return}try{v.value=!0,await W(o.email),n.success("验证码已发送到您的邮箱"),b.value=!0;let r=60;_.value=`${r}s后重新发送`;const e=setInterval(()=>{r--,r<=0?(clearInterval(e),b.value=!1,_.value="获取验证码"):_.value=`${r}s后重新发送`},1e3)}catch(r){n.error(r.message||"发送失败，请稍后重试")}finally{v.value=!1}}},C=()=>{y.value&&y.value.validate(async r=>{if(r){k.value=!0;try{const e=await X(m);e.code===200?(B.updateToken(e.data.token),n.success("登录成功"),R.push({name:"home"})):n.error(e.message||"登录失败")}catch(e){n.error(e.response.data.message||"登录失败，请稍后重试")}finally{k.value=!1}}else n.error("请正确填写表单")})},F=()=>{V.value&&V.value.validate(async r=>{if(r){x.value=!0;try{const e=await Y(o);e.code===200?(n.success("注册成功，请登录"),c.value="login",m.email=o.email,Object.assign(o,{email:"",name:"",code:"",password:"",password2:""})):n.error(e.message||"注册失败")}catch(e){n.error(e.message||"注册失败，请稍后重试")}finally{x.value=!1}}else n.error("请正确填写表单")})},M=()=>{R.push({name:"password"})};return(r,e)=>{const f=u("el-icon"),p=u("el-input"),g=u("el-form-item"),h=u("el-link"),U=u("el-button"),q=u("el-form"),S=u("el-tab-pane"),$=u("el-tabs");return G(),O("div",Z,[e[21]||(e[21]=s("div",{class:"bg-shape shape-1"},null,-1)),e[22]||(e[22]=s("div",{class:"bg-shape shape-2"},null,-1)),s("div",ee,[s("div",ae,[s("div",se,[e[11]||(e[11]=D('<div class="brand-header" data-v-41471a1a><img src="'+E+'" alt="Logo" class="brand-logo" data-v-41471a1a><span class="brand-name" data-v-41471a1a>DocTranslator</span></div><div class="brand-slogan" data-v-41471a1a><p class="main-slogan" data-v-41471a1a>开源的AI文档智能翻译平台</p><p class="sub-slogan" data-v-41471a1a>一站式文档翻译平台</p></div>',2)),s("div",le,[s("div",oe,[a(f,null,{default:l(()=>[a(T(H))]),_:1}),e[8]||(e[8]=s("span",null,"开源项目，社区支持",-1))]),s("div",te,[a(f,null,{default:l(()=>[a(T(J))]),_:1}),e[9]||(e[9]=s("span",null,"支持本地/云端部署",-1))]),s("div",re,[a(f,null,{default:l(()=>[a(T(Q))]),_:1}),e[10]||(e[10]=s("span",null,"支持定制化功能开发",-1))])])]),e[12]||(e[12]=s("div",{class:"sidebar-footer"},[s("div",{class:"copyright-info"},[s("a",{href:"https://www.doctranslator.cn",target:"_blank",class:"github-link"},[s("p",{class:"copyright"},"© 2025 DocTranslator 1.5.0 保留所有权利")])])],-1))]),s("div",ne,[e[20]||(e[20]=D('<div class="mobile-header" data-v-41471a1a><div class="mobile-brand" data-v-41471a1a><img src="'+E+'" alt="Logo" class="mobile-logo" data-v-41471a1a><div class="mobile-text" data-v-41471a1a><h1 class="mobile-title" data-v-41471a1a>DocTranslator Pro</h1><p class="mobile-subtitle" data-v-41471a1a>AI文档智能翻译平台</p></div></div></div>',1)),s("div",ie,[s("div",de,[s("h2",ue,L(c.value==="login"?"欢迎回来":"创建账号"),1),s("p",me,L(c.value==="login"?"登录您的账户":"注册新账户开始使用"),1)]),a($,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=t=>c.value=t),stretch:"",class:"custom-tabs"},{default:l(()=>[a(S,{label:"登录",name:"login"},{default:l(()=>[a(q,{ref_key:"loginFormRef",ref:y,model:m,rules:K,size:"large",class:"auth-form",onKeyup:I(C,["enter"])},{default:l(()=>[a(g,null,{default:l(()=>[a(p,{modelValue:m.email,"onUpdate:modelValue":e[0]||(e[0]=t=>m.email=t),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),a(g,null,{default:l(()=>[a(p,{modelValue:m.password,"onUpdate:modelValue":e[1]||(e[1]=t=>m.password=t),type:"password","show-password":"",placeholder:"请输入密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),s("div",pe,[a(h,{underline:!1,class:"forget-link",onClick:M},{default:l(()=>e[13]||(e[13]=[d("忘记密码?")])),_:1})]),a(U,{type:"primary",class:"submit-btn",loading:k.value,onClick:C},{default:l(()=>e[14]||(e[14]=[d("登录")])),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1}),a(S,{label:"注册",name:"register"},{default:l(()=>[a(q,{ref_key:"registerFormRef",ref:V,model:o,rules:N,size:"large",class:"auth-form",onKeyup:I(F,["enter"])},{default:l(()=>[a(g,{prop:"name"},{default:l(()=>[a(p,{modelValue:o.name,"onUpdate:modelValue":e[2]||(e[2]=t=>o.name=t),placeholder:"请输入昵称","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),a(g,{prop:"email"},{default:l(()=>[a(p,{modelValue:o.email,"onUpdate:modelValue":e[3]||(e[3]=t=>o.email=t),placeholder:"请输入邮箱地址","prefix-icon":"Message"},null,8,["modelValue"])]),_:1}),a(g,{prop:"code"},{default:l(()=>[a(p,{modelValue:o.code,"onUpdate:modelValue":e[4]||(e[4]=t=>o.code=t),placeholder:"请输入验证码","prefix-icon":"Key"},{suffix:l(()=>[a(U,{type:"primary",link:"",class:"code-btn",disabled:b.value,loading:v.value,onClick:z},{default:l(()=>[d(L(_.value),1)]),_:1},8,["disabled","loading"])]),_:1},8,["modelValue"])]),_:1}),a(g,{prop:"password"},{default:l(()=>[a(p,{modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=t=>o.password=t),type:"password","show-password":"",placeholder:"请设置密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),a(g,{prop:"password2"},{default:l(()=>[a(p,{modelValue:o.password2,"onUpdate:modelValue":e[6]||(e[6]=t=>o.password2=t),type:"password","show-password":"",placeholder:"请确认密码","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),a(U,{type:"primary",class:"submit-btn",loading:x.value,onClick:F},{default:l(()=>e[15]||(e[15]=[d(" 注册 ")])),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue"]),s("div",ge,[s("p",fe,[e[18]||(e[18]=d(" 继续使用即表示同意 ")),a(h,{type:"primary",class:"footer-link"},{default:l(()=>e[16]||(e[16]=[d("服务条款")])),_:1}),e[19]||(e[19]=d(" 和 ")),a(h,{type:"primary",class:"footer-link"},{default:l(()=>e[17]||(e[17]=[d("隐私政策")])),_:1})])])])])])])}}},we=A(ce,[["__scopeId","data-v-41471a1a"]]);export{we as default};
